<div class="title">
    <h1>Admin Configuration</h1>
    <a [routerLink]="['']">
        <button mat-raised-button>
            <mat-icon>arrow_back</mat-icon>
            Back
        </button>
    </a>
</div>
<div class="loading-shade" *ngIf="loading">
    <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
</div>

<mat-tab-group *ngIf="config$ | async as configuration">
    <mat-tab label="Partners">
        <div class="padding-top">
            <table *ngIf="configuration.hasOwnProperty('partner')">
                <tr>
                    <th colspan="2" class="sender"><h3>Sender's address list</h3></th>
                </tr>
                <tr *ngFor="let address of configuration.partner.addresses; let i = index">
                    <td>
                        <mat-icon matListIcon (click)="onRemoveAddress(i)" color="primary">delete</mat-icon>
                    </td>
                    <td [innerHTML]=replaceComma(address)></td>
                </tr>
                <tr *ngIf="!configuration.partner.addresses.length">
                    <td></td>
                    <td>No address is added</td>
                </tr>
            </table>
            <table *ngIf="!configuration.hasOwnProperty('partner')">
                <tr>
                    <td></td>
                    <td>No address is added</td>
                </tr>
            </table>
            <h3 class="padding-top">Add to address list:</h3>
            <mat-form-field>
                <mat-label>Address</mat-label>
                <input matInput [(ngModel)]="newSenderAddress">
                <mat-hint>Use comma for line change</mat-hint>
            </mat-form-field>

            <div mat-dialog-actions class="padding-top">
                <button mat-raised-button color="primary" (click)="onAddSender()">Save address</button>
            </div>
            <br>
        </div>
    </mat-tab>
    <mat-tab label="Users">
        <h2>Logo</h2>
        <div class="buttonsContainer">
            <input type="file" id="logo" class="hidden"
                   (change)="onLogoChanged($event.target.files)"
                   accept=".gif, .jpg, .png"/>
            <label for="logo" class="mat-raised-button">Select a logo ...</label>

            <input id="clear" class="hidden" (click)="clearLogo()"/>
            <label for="clear" class="mat-raised-button">Clear logo</label>
        </div>
        <div class="logo" *ngIf="configuration.hasOwnProperty('user')">
            <img alt="No logo is selected" src="{{configuration.user.logo}}"/>
        </div>
        <div class="logo" *ngIf="!configuration.hasOwnProperty('user')">
            <img alt="No logo is selected" src=""/>
        </div>
    </mat-tab>
    <mat-tab label="Address format">
        <div *ngIf="showExample">
            <mat-divider></mat-divider>
            <table *ngIf="configuration.hasOwnProperty('addressFormat')">
                <tr style="text-align: left">
                    <th></th>
                    <th>Number</th>
                    <th>Address format</th>
                </tr>
                <tr *ngFor="let addresses of configuration.addressFormat.addresses | keyvalue">
                    <td valign="top">
                        <mat-radio-button style="display: block; color: black"
                                          (change)="onSelectMyAddressFormat($event)"
                                          [value]="addresses.key"
                                          checked="{{configuration.addressFormat.default === addresses.key }}"
                        >
                        </mat-radio-button>
                    </td>
                    <td valign="top"><h3>{{ addresses.key}}</h3></td>
                    <td>
                        <div style="padding-top: 10px" *ngFor="let addressLine of addresses.value ">
                            <span *ngFor="let addressElement of addressLine">
                                {{ addressElement }}
                            </span>
                        </div>
                    </td>
                </tr>
            </table>

            <!--<div buttons>-->
            <!--<button mat-flat-button type="button" color="primary">Add address format</button>-->
            <!--</div>-->
            <!--<br/>-->
            <!--<mat-divider></mat-divider>-->
            <!--<br/>-->

            <!--<div *ngIf="true">-->
            <!--<h3 class="padding-top">Country format name</h3>-->
            <!--<mat-form-field>-->
            <!--<mat-label>Address</mat-label>-->
            <!--<input matInput [(ngModel)]="newSenderAddress">-->
            <!--<mat-hint>Use comma for line change</mat-hint>-->
            <!--</mat-form-field>-->
            <!--</div>-->
        </div>
    </mat-tab>
</mat-tab-group>